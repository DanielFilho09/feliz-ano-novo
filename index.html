<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Feliz Ano Novo 2026!</title>

  <!-- FAVICON (relativo para GitHub Pages) -->
  <link rel="icon" href="./assets/favicon.png" type="image/png" />

  <!-- Minimal manifest hint (opcional: crie /assets/manifest.json se quiser PWA) -->
  <link rel="manifest" href="./assets/manifest.json" crossorigin="use-credentials" />
  <meta name="theme-color" content="#070018">

  <style>
    :root{
      --bg-1: #050014;
      --bg-2: #000000;
      --card: rgba(255,255,255,0.04);
      --accent: #00eaff;
      --gold: #ffe26f;
      --glass-blur: 10px;
      --radius: 16px;
      --text-soft: rgba(255,255,255,0.85);
    }

    html,body{
      height:100%;
      margin:0;
      font-family: Inter, "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
      color:var(--text-soft);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* app container (centered, responsive) */
    .app {
      position:relative;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      box-sizing:border-box;
      overflow:hidden;
    }

    .card {
      width:100%;
      max-width:980px;
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
      padding:28px;
      position:relative;
      overflow:hidden;
    }

    /* header text */
    .hero {
      text-align:center;
      padding: 12px 8px 28px;
    }

    .title {
      font-size:clamp(28px, 5vw, 48px);
      color:var(--gold);
      margin:0 0 8px 0;
      letter-spacing:1px;
      text-shadow: 0 0 8px rgba(255,210,100,0.4), 0 0 30px rgba(255,140,0,0.12);
      transform-origin:center;
      transition: transform .6s ease;
    }

    .subtitle {
      margin:0;
      color: #ffffffc7;
      font-size:clamp(14px,2.6vw,18px);
    }

    /* countdown */
    .countdown {
      display:flex;
      gap:12px;
      justify-content:center;
      margin:20px 0;
      flex-wrap:wrap;
    }

    .time-box {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:12px;
      padding:12px 14px;
      min-width:110px;
      text-align:center;
      box-shadow: inset 0 -6px 18px rgba(0,0,0,0.4);
      backdrop-filter: blur(4px);
    }

    .time-label { font-size:12px; color:#dfefff; opacity:0.9; }
    .time-value { font-size:20px; color:var(--accent); font-weight:700; margin-top:6px; }

    /* controls floating */
    .controls {
      position: absolute;
      right: 18px;
      top: 18px;
      display:flex;
      gap:12px;
      z-index: 20;
    }

    .btn {
      background: rgba(255,255,255,0.04);
      color:var(--text-soft);
      border: none;
      padding:10px 12px;
      border-radius:10px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.45);
      display:flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
      transition: transform .14s ease, background .18s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .btn:active { transform: translateY(1px) scale(.995); }
    .btn .dot { width:10px; height:10px; border-radius:50%; background:var(--accent); box-shadow:0 0 8px var(--accent); }

    /* footer */
    footer {
      text-align:center;
      margin-top:18px;
      color: #ffffff9a;
      font-size:13px;
    }

    /* canvas covers background */
    #bg-canvas, #fireworks {
      position: absolute;
      inset: 0;
      width:100%;
      height:100%;
      z-index: 1;
      pointer-events:none;
    }

    /* content above canvas */
    .card, .controls, .ui-overlay { z-index: 6; position:relative; }

    /* transition state (year reached) */
    .celebrate .title { transform: scale(1.06) rotate(-1deg); }
    .celebrate .time-value { color: #fff; text-shadow: 0 0 14px #fff; }
    .celebrate .card { box-shadow: 0 20px 60px rgba(0,0,0,0.7); }

    /* app-like small-screen tweaks */
    @media (max-width:600px) {
      .controls { right:12px; top:12px; gap:8px; }
      .btn { padding:8px 10px; border-radius:9px; }
      .time-box { min-width:84px; padding:8px 10px; }
      .subtitle { font-size:14px; }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- canvas for subtle background particles -->
    <canvas id="bg-canvas"></canvas>

    <div class="card" id="card">
      <div class="controls" aria-hidden="true">
        <!-- Play/Pause control for music -->
        <button id="playBtn" class="btn" title="Tocar mÃºsica">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path id="playIcon" d="M6 4v16l12-8L6 4z" fill="currentColor"/>
          </svg>
          <span id="playLabel">Tocar</span>
        </button>

        <!-- toggle sound effects -->
        <button id="sfxBtn" class="btn" title="Sons de efeito (pop)">
          <span class="dot" id="sfxDot"></span>
          <span style="font-size:13px">SFX</span>
        </button>
      </div>

      <div class="hero">
        <h1 class="title">Feliz Ano Novo 2026!</h1>
        <p class="subtitle">Que 2026 traga luz, conquistas e muita alegria! ðŸŽ‰</p>

        <div id="countdown" class="countdown" aria-live="polite">
          <div class="time-box">
            <div class="time-label">Dias</div>
            <div class="time-value" id="days">0</div>
          </div>
          <div class="time-box">
            <div class="time-label">Horas</div>
            <div class="time-value" id="hours">0</div>
          </div>
          <div class="time-box">
            <div class="time-label">Minutos</div>
            <div class="time-value" id="minutes">0</div>
          </div>
          <div class="time-box">
            <div class="time-label">Segundos</div>
            <div class="time-value" id="seconds">0</div>
          </div>
        </div>

        <footer>Desenvolvido por Daniel Filho</footer>
      </div>
    </div>

    <!-- fireworks canvas sits above background but below UI -->
    <canvas id="fireworks"></canvas>
  </div>

  <!-- Audio (use relative paths for GitHub Pages) -->
  <audio id="bgMusic" loop preload="auto">
    <source src="./assets/newyear.mp3" type="audio/mpeg" />
    Seu navegador nÃ£o suporta reproduÃ§Ã£o de Ã¡udio.
  </audio>

  <!-- small pop sound on transition -->
  <audio id="popSfx" preload="auto">
    <source src="./assets/pop.mp3" type="audio/mpeg" />
  </audio>

  <script>
  // -----------------------
  // Config
  // -----------------------
  const TARGET = new Date('Jan 1, 2026 00:00:00').getTime();
  const app = document.getElementById('app');
  const card = document.getElementById('card');
  const playBtn = document.getElementById('playBtn');
  const playLabel = document.getElementById('playLabel');
  const playIcon = document.getElementById('playIcon');
  const sfxBtn = document.getElementById('sfxBtn');
  const sfxDot = document.getElementById('sfxDot');
  const bgMusic = document.getElementById('bgMusic');
  const popSfx = document.getElementById('popSfx');

  let sfxEnabled = true;
  let musicPlaying = false;

  // -----------------------
  // Countdown logic
  // -----------------------
  const daysEl = document.getElementById('days');
  const hoursEl = document.getElementById('hours');
  const minutesEl = document.getElementById('minutes');
  const secondsEl = document.getElementById('seconds');

  function updateCountdown() {
    const now = Date.now();
    const dist = TARGET - now;

    if (dist <= 0) {
      daysEl.textContent = '0';
      hoursEl.textContent = '0';
      minutesEl.textContent = '0';
      secondsEl.textContent = '0';
      // trigger celebration once
      if (!app.classList.contains('celebrate')) {
        triggerCelebration();
      }
      return;
    }

    const d = Math.floor(dist / (1000*60*60*24));
    const h = Math.floor((dist % (1000*60*60*24)) / (1000*60*60));
    const m = Math.floor((dist % (1000*60*60)) / (1000*60));
    const s = Math.floor((dist % (1000*60)) / 1000);

    daysEl.textContent = d;
    hoursEl.textContent = h.toString().padStart(2, '0');
    minutesEl.textContent = m.toString().padStart(2, '0');
    secondsEl.textContent = s.toString().padStart(2, '0');
  }

  updateCountdown();
  const countdownTimer = setInterval(updateCountdown, 1000);

  // -----------------------
  // Play / Pause music (user gesture required)
  // -----------------------
  function setPlayState(play) {
    musicPlaying = play;
    if (play) {
      const p = bgMusic.play();
      // play() returns a promise; ignore rejections (autoplay blocked)
      if (p && p.catch) p.catch(()=>{/* autoplay blocked; wait for user */});
      playLabel.textContent = 'Pausar';
      // change icon to pause
      playIcon.setAttribute('d', 'M6 19h4V5H6v14zM14 5v14h4V5h-4z');
    } else {
      bgMusic.pause();
      playLabel.textContent = 'Tocar';
      playIcon.setAttribute('d', 'M6 4v16l12-8L6 4z');
    }
  }

  playBtn.addEventListener('click', () => {
    setPlayState(!musicPlaying);
  });

  // SFX toggle
  sfxBtn.addEventListener('click', () => {
    sfxEnabled = !sfxEnabled;
    sfxDot.style.background = sfxEnabled ? 'var(--accent)' : 'rgba(255,255,255,0.18)';
  });

  // -----------------------
  // Background subtle particles
  // -----------------------
  const bgCanvas = document.getElementById('bg-canvas');
  const bgCtx = bgCanvas.getContext('2d');
  function resizeCanvas() {
    [bgCanvas, document.getElementById('fireworks')].forEach(c => {
      c.width = window.innerWidth;
      c.height = window.innerHeight;
    });
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  // gentle twinkling stars
  const stars = [];
  for (let i=0;i<120;i++){
    stars.push({
      x: Math.random()*bgCanvas.width,
      y: Math.random()*bgCanvas.height,
      r: Math.random()*1.6+0.2,
      flicker: Math.random()*0.03+0.01,
      a: Math.random()*0.8+0.2
    });
  }

  function drawBg() {
    bgCtx.clearRect(0,0,bgCanvas.width,bgCanvas.height);
    // soft radial vignette
    const g = bgCtx.createLinearGradient(0,0,0,bgCanvas.height);
    g.addColorStop(0, 'rgba(5,0,20,0.0)');
    g.addColorStop(1, 'rgba(0,0,0,0.4)');
    bgCtx.fillStyle = g;
    bgCtx.fillRect(0,0,bgCanvas.width,bgCanvas.height);

    stars.forEach(s=>{
      s.a += s.flicker*(Math.random()>0.5?1:-1);
      s.a = Math.max(0.05, Math.min(1, s.a));
      bgCtx.beginPath();
      bgCtx.fillStyle = `rgba(255,255,255,${s.a})`;
      bgCtx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      bgCtx.fill();
    });

    requestAnimationFrame(drawBg);
  }
  drawBg();

  // -----------------------
  // Fireworks & confetti canvas
  // -----------------------
  const fxCanvas = document.getElementById('fireworks');
  const fxCtx = fxCanvas.getContext('2d');
  const particles = [];

  function random(min,max){ return Math.random()*(max-min)+min; }

  class FXParticle {
    constructor(x,y, vx, vy, size, color, life, gravity=0.02){
      this.x=x; this.y=y; this.vx=vx; this.vy=vy;
      this.size=size; this.color=color; this.life=life; this.age=0; this.gravity=gravity;
    }
    update(){
      this.age++;
      this.vy += this.gravity;
      this.x += this.vx;
      this.y += this.vy;
      this.size *= 0.992;
    }
    draw(ctx){
      ctx.beginPath();
      ctx.fillStyle = this.color;
      ctx.globalCompositeOperation = 'lighter';
      ctx.arc(this.x, this.y, Math.max(0, this.size), 0, Math.PI*2);
      ctx.fill();
      ctx.globalCompositeOperation = 'source-over';
    }
  }

  function createBurst(x,y,color,amount=60){
    for(let i=0;i<amount;i++){
      const angle = Math.random()*Math.PI*2;
      const speed = random(1.6,6.6);
      const vx = Math.cos(angle)*speed;
      const vy = Math.sin(angle)*speed;
      const size = random(1.8,5.5);
      const life = random(40,120);
      particles.push(new FXParticle(x,y,vx,vy,size,color,life,0.02));
    }
  }

  // periodic subtle fireworks
  function maybeCreateRandomFirework(){
    if (Math.random() < 0.06) {
      const x = random(50, fxCanvas.width-50);
      const y = random(60, fxCanvas.height*0.45);
      const colors = ['#00eaff','#ff6f91','#f9f871','#7cffcb','#ff9a76'];
      createBurst(x,y, colors[Math.floor(Math.random()*colors.length)], 56);
    }
  }

  function animateFX(){
    fxCtx.fillStyle = 'rgba(0,0,0,0.12)';
    fxCtx.fillRect(0,0,fxCanvas.width,fxCanvas.height);

    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.update();
      p.draw(fxCtx);
      if (p.size < 0.6) particles.splice(i,1);
    }

    if (!app.classList.contains('celebrate')) {
      maybeCreateRandomFirework();
    }
    requestAnimationFrame(animateFX);
  }
  animateFX();

  // -----------------------
  // Celebration transition (on new year)
  // -----------------------
  function triggerCelebration(){
    // mark state
    app.classList.add('celebrate');

    // bigger burst near center
    const centerX = fxCanvas.width/2;
    const centerY = fxCanvas.height*0.35;

    // create multiple bursts
    const colors = ['#fff176','#ff5252','#00eaff','#00c853','#e040fb'];
    for(let i=0;i<8;i++){
      createBurst(centerX + random(-120,120), centerY + random(-80,80), colors[i % colors.length], 120);
    }

    // play pop sfx + music (if enabled)
    if (sfxEnabled) {
      try { popSfx.currentTime = 0; popSfx.play(); } catch(e){}
    }
    // attempt to play music if not playing
    if (!musicPlaying) {
      setPlayState(true);
    }

    // flash effect: expand & fade overlay
    const flash = document.createElement('div');
    flash.style.position = 'fixed';
    flash.style.left = '0';
    flash.style.top = '0';
    flash.style.width = '100%';
    flash.style.height = '100%';
    flash.style.background = 'radial-gradient(circle, rgba(255,255,255,0.15), rgba(255,255,255,0.03))';
    flash.style.pointerEvents = 'none';
    flash.style.opacity = '0';
    flash.style.transition = 'opacity 900ms ease';
    document.body.appendChild(flash);
    requestAnimationFrame(()=> flash.style.opacity = '1');
    setTimeout(()=> flash.style.opacity = '0', 600);
    setTimeout(()=> document.body.removeChild(flash), 1600);

    // update title text
    const title = document.querySelector('.title');
    title.textContent = 'Feliz 2026! âœ¨';
    // small confetti (particles) continuing for some time
    runConfettiBurst(400);

    // keep some large bursts for a while
    const extra = setInterval(()=>{
      createBurst(random(100,fxCanvas.width-100), random(60, fxCanvas.height*0.5), colors[Math.floor(Math.random()*colors.length)], 80);
    }, 900);

    // stop extra after 18s
    setTimeout(()=> clearInterval(extra), 18000);
  }

  // confetti helper (many colorful particles that fall)
  function runConfettiBurst(count=300){
    const palette = ['#ff6f91','#f9f871','#00eaff','#7cffcb','#ff9a76','#b388ff','#ffd180'];
    for(let i=0;i<count;i++){
      const x = random(0, fxCanvas.width);
      const y = random(-50, -10);
      const vx = random(-1.2,1.2);
      const vy = random(1,4);
      const size = random(2,6);
      const color = palette[Math.floor(Math.random()*palette.length)];
      particles.push(new FXParticle(x, y, vx, vy, size, color, 200, 0.04));
    }
  }

  // -----------------------
  // Accessibility: keyboard shortcuts
  // -----------------------
  window.addEventListener('keydown', (e) => {
    if (e.key === 'm') setPlayState(!musicPlaying); // m = music
    if (e.key === 's') { sfxEnabled = !sfxEnabled; sfxDot.style.background = sfxEnabled ? 'var(--accent)' : 'rgba(255,255,255,0.18)'; }
  });

  // -----------------------
  // Helpful note for GitHub Pages: ensure assets exist
  // -----------------------
  // If your sound files are missing the audio elements will fail silently.
  // Put audio files at: /assets/newyear.mp3 and /assets/pop.mp3 in your repo root.
  </script>
</body>
</html>
